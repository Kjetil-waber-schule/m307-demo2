<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>Prüfungsantworten</title>
    <style>
      body {
        font-family: sans-serif;
      }
      h2 {
        margin-top: 2em;
      }
      .antwort {
        margin-bottom: 1em;
      }
      .antwort p:first-child {
        font-weight: bold;
      }
      pre {
        background-color: #f5f5f5;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
      }

      li {
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Schriftliche Prüfung - M307</h1>
    <h2>Interaktive Websites und JavaScript</h2>

    <h2>
      Frage 1 (2 Punkte) - Wie unterscheiden sich Handlebars- von HTML-Dateien?
    </h2>
    <div class="antwort">
      <ul>
        <li>
          Handlebars-Dateien haben die Dateiendung <code>.handlebars</code>,
          während HTML-Dateien die Endung <code>.html</code> oder
          <code>.htm</code> haben.
        </li>
        <li>
          Handlebars-Dateien können neben HTML-Code auch Handlebars-Ausdrücke
          enthalten, die in doppelte geschweifte Klammern
          <code>{{ }}</code> eingeschlossen sind. Diese Ausdrücke ermöglichen
          es, dynamische Inhalte in die HTML-Seite einzufügen, die serverseitig
          gerendert werden.
        </li>
      </ul>
    </div>

    <h2>
      Frage 2 (1 Punkt) - Welche Adresse muss im Browser eingegeben werden,
      damit die home.handlebars-Datei angezeigt wird?
    </h2>
    <div class="antwort">
      <ul>
        <li>
          <code>/</code>
        </li>
        <li>
          <code>/start</code>
        </li>
      </ul>
    </div>

    <h2>
      Frage 4 (1 Punkt) - Wie lautet die SQL-Abfrage, um alle Posts aus der
      Datenbanktabelle «posts» zu löschen?
    </h2>
    <div class="antwort">
      <pre>DELETE FROM posts;</pre>
    </div>

    <h2>
      Frage 5 (2 Punkte) - In welchem Bereich des folgenden Codes muss die
      SQL-Abfrage platziert werden? Begründe weshalb es dort stehen muss.
    </h2>
    <div class="antwort">
      <p>(3) Begründung:</p>
      <p>
        Die SQL-Abfrage muss vor dem <code>res.render</code> ausgeführt werden,
        da die abgefragten Daten (in diesem Fall <code>events</code>) der
        <code>render</code>-Funktion übergeben werden müssen, damit diese im
        Template verwendet werden können. An der Stelle (3) wird
        <code>await pool.query(...)</code> ausgeführt, das heißt, dass hier das
        Ergebnis der Datenbankabfrage vorliegt und in der Variable
        <code>events</code> gespeichert wird.
      </p>
    </div>

    <h2>
      Frage 7 (4 Punkte) - In Bezug zum Code aus der Frage 5: Welche Code-Teile
      fehlen in den jeweiligen Platzhaltern? Ergänze den Code, um auf der
      aufgerufenen Route «overview» alle Inhalte aus der Datenbanktabelle events
      anzuzeigen.
    </h2>
    <div class="antwort">
      <ul>
        <li>(1) <code>"/overview"</code></li>
        <li>(2) <code>req, res</code></li>
        <li>(3) <code>"SELECT * FROM events"</code></li>
        <li>(4) <code>events: events</code></li>
      </ul>
    </div>

    <h2>
      Frage 8 (1 Punkt) - Wie wird die Variable namens «events» im HTML-Code in
      einer Handlebars-Datei verwendet, um alle Resultate der Datenbank
      aufzulisten?
    </h2>
    <div class="antwort">
      <p>
        Um die Resultate der Datenbank aufzulisten, wird in der Handlebars-Datei
        eine <code>each</code>-Schleife verwendet.
      </p>
      <pre>
{{#each events}}
  <p>{{this.spalte1}}</p>
  <p>{{this.spalte2}}</p>
  ...
{{/each}}
        </pre
      >
      <p>
        Innerhalb der Schleife kann man mit <code>this</code> auf das aktuelle
        Element der Liste zugreifen und mit <code>this.spaltenname</code> auf
        die einzelnen Spalten der Datenbanktabelle.
      </p>
    </div>

    <h2>
      Frage 10 (2 Punkte) - Was ist der Unterschied von «res.redirect» und
      «res.render» mit dem Beispiel vom folgenden Code?
    </h2>
    <div class="antwort">
      <ul>
        <li>
          <code>res.redirect(url)</code>: Leitet den Client (Browser) zu einer
          anderen URL um. Der Server sendet einen HTTP-Statuscode (normalerweise
          302 Found), der den Browser anweist, eine neue Anfrage an die
          angegebene URL zu senden. Im Beispiel wird der Benutzer zu
          <code>/login</code> umgeleitet, wenn er nicht eingeloggt ist.
        </li>
        <li>
          <code>res.render(view, data)</code>: Rendert eine View-Vorlage (z.B.
          eine Handlebars-Datei) und sendet das gerenderte HTML an den Client.
          Die <code>data</code> werden an die View übergeben und können dort
          verwendet werden. Im Beispiel wird die <code>intern</code>-Vorlage
          gerendert und das <code>user</code>-Objekt an die Vorlage übergeben.
        </li>
      </ul>
      <p>
        <b>Zusammengefasst:</b> <code>res.redirect</code> führt eine
        Client-seitige Umleitung durch, während <code>res.render</code> eine
        Server-seitige Vorlage rendert und das Ergebnis an den Client sendet.
      </p>
    </div>

    <h2>Frage 12 (1 Punkt) - Welche Aussage ist wahr oder falsch?</h2>
    <div class="antwort">
      <p>
        Der else-Block wird auch ausgeführt, wenn die if-Anweisung erfüllt ist.
      </p>
      <p>Antwort: <code>false</code></p>
      <p>
        Der <code>else</code>-Block wird <b>nicht</b> ausgeführt, wenn die
        <code>if</code>-Anweisung erfüllt ist. Der <code>else</code>-Block wird
        nur ausgeführt, wenn die Bedingung in der <code>if</code>-Anweisung
        <b>falsch</b> ist.
      </p>
    </div>
  </body>
</html>
